<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/list@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/image@2.3.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/table@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/embed@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/link@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/@editorjs/delimiter@latest"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src='https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js'></script>
    <script src='https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js'></script>
    <script src="js/config.js"></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
</head>
<style>
    #editorjs{
        margin-top: 30px;
    }
    label > input[type="file"] {
        display:none; /* アップロードボタンのスタイルを無効にする */
    }
    label {
        width: 100%;
    }
</style>
<body>
  <div id="editorjs"></div>
  <script>
    const ImageTool = window.ImageTool;

    const editor = new EditorJS({
        holder : 'editorjs',
        placeholder: 'Enter Card Content',
        tools: {
            Header,
            list: {
                class: List,
                inlineToolbar: true
            },
            table: {
                class: Table,
                inlineToolbar: true
            },
            image: {
                class: ImageTool,
                config: {
                    uploader: {
                        async uploadByFile(file){
                            const storageRef = firebase.storage().ref('article/'+file.name);
                            var uploadTask = await storageRef.put(file);
                            console.log("Uploaded successfully!", uploadTask);
                            const downloadURL = await uploadTask.ref.getDownloadURL();
                            console.log(downloadURL);
                            return {
                                success: 1,
                                file: {
                                    url: downloadURL
                                }
                            }

                        },
                    }
                }
                // class: SimpleImage
            },
            embed: {
                class: Embed,
                config: {
                    services: {
                        youtube: true,
                        twitter: true,
                    },
                },
            },
            linkTool: {
                class: LinkTool,
                config: {
                    endpoint: '', // Your backend endpoint for url data fetching,
                }
            },
            delimiter: Delimiter,
        },
        autofocus: true
    });
  </script>
</body>

</html>
