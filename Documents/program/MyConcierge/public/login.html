<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ログイン</title>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <script src='https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js'></script>
  <script src='https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js'></script>
  <script src="js/config.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>
<body>
<header></header>
<div id='main' style="display: flex;flex-direction: row;justify-content: center;">
    <div id='main_card' style="width: 500px;text-align: center;margin-top: 100px;padding:50px 0 20px 0;"class="card">
        <div id='title'>
            <h3>ログイン</h3>
        </div>
        <div id='mail_input'>
            <input id="email"type="email"placeholder='email'style="width:60%;margin:30px 0;">
        </div>
        <div id='password_input'>
            <input id="password"type="password"placeholder='password'style="width:60%;margin:0 0 30px 0;">
        </div>
        <div id='button_area'>
            <button id="login_button"class="btn btn-outline-secondary"style="width:60%;margin:20px 0 20px 0;">ログイン</button>
        </div>
    </div>
</div>
<footer></footer>
</body>
<script>
    // ログインのボタンクリック
    const button = document.getElementById('login_button');
    button.addEventListener('click', () =>{
        const searchId = document.querySelector('#email').value;
        const searchPassword = document.querySelector('#password').value;
        findUser(searchId,searchPassword);
    });

    // ユーザーログイン
    function findUser(searchId,searchPassword) {
        firebase.auth().signInWithEmailAndPassword(searchId, searchPassword)
            .then((userCredential)=>{
                window.location.href = "write.html";
            })
            .catch((error)=>{
                alert(error.message);
            })
    }
    $(function(){
        $('header').load("components/header.html")
    $('footer').load("components/footer.html")
    })

</script>
</html>
